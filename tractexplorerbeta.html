<!doctype html>
<html lang="en">
  <head>
    <title>Tract Explorer</title>
    <meta charset="utf-8">
    <meta name="description" content="3D Brain Tract Viewer">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link id="theme-styles" type="text/css" href="./styles.css" rel="stylesheet"/>
    <script src="https://unpkg.com/focus-visible@5.0.2/dist/focus-visible.js" defer></script>
  </head>
  <body>
    <button id="theme-toggle">Toggle Dark Mode</button>
    
    <model-viewer id="tracts-demo" src="5k_tracts_mesh.glb" poster="tractograms_final.png" shadow-intensity="1" ar camera-controls touch-action="pan-y" alt="3D White Matter Tracts">
      <button slot="ar-button" id="ar-button">View in your space</button>
      <div id="ar-prompt">
        <img src="https://modelviewer.dev/shared-assets/icons/hand.png">
      </div>
      <button id="ar-failure">AR is not tracking!</button>
      <div id="controls">
        <label for="src">Tract:</label>
        <select id="src">
                <option value="5k_tracts_mesh.glb">Template Tractogram</option>
                <option value="L_AF.glb">Arcuate Fasciculus</option>
                <option value="L_UF.glb">Uncinate Fasciculus</option>
                <option value="L_IFOF.glb">Inferior Frontooccipital Fasciculus</option>
                <option value="L_ILF.glb">Inferior Longitudinal Fasciculus</option>
                <option value="L_mLF.glb">Middle Longitudinal Fasciculus</option>
                <option value="L_SLF.glb">Superior Longitudinal Fasciculus</option>
                <option value="L_VOF.glb">Vertical Occipital Fasciculus</option>
                <option value="L_FAT.glb">Frontal Aslant Tract</option>
                <option value="AR_L.glb">Acoustic Radiation</option>
                <option value="L_CG.glb">Cingulum</option>
                <option value="L_EMC.glb">Extreme Capsule</option>
                <option value="CBT_L.glb">Corticobulbar Tract</option>
                <option value="CPT_L.glb">Corticopontine Tract</option>
                <option value="CS_L.glb">Corticostriatal Tract</option>
                <option value="CST_L.glb">Corticospinal Tract</option>
                <option value="DRTT_L.glb">Dentatorubrothalamic Tract</option>
                <option value="F_L.glb">Fornix</option>
                <option value="ML_L.glb">Medial Lemniscus</option>
                <option value="OR_L.glb">Optic Radiation</option>
                <option value="RST_L.glb">Reticulospinal Tract</option>
                <option value="TR_L.glb">Thalamic Radiation</option>
                <option value="AC.glb">Anterior Commissure</option>
                <option value="CC.glb">Corpus Callosum</option>
                <option value="L_CB.glb">Cerebellum</option>
        </select>
        <label for="show-brain">Show Brain:</label>
        <input id="show-brain" type="checkbox">
      </div>
    </model-viewer>
    
    <script type="module">
      const modelViewer = document.querySelector('#tracts-demo');
      const checkbox = document.querySelector('#show-brain');
      const select = document.querySelector('#src');
      
      select.addEventListener('input', () => {
        const value = select.value;
        modelViewer.poster = value + '_poster.png';
        modelViewer.src = checkbox.checked ? value + '_glass.glb' : value;
      });
      
      checkbox.addEventListener('change', () => {
        const value = select.value;
        modelViewer.src = checkbox.checked ? value + '_glass.glb' : value;
      });
      
      document.getElementById("theme-toggle").addEventListener("click", () => {
        document.body.classList.toggle("dark-mode");
      });
    </script>
    
    <style>
      body {
        transition: background 0.3s ease, color 0.3s ease;
      }
      .dark-mode {
        background: #121212;
        color: white;
      }
      model-viewer {
        background-color: #FFFFFF;
        overflow-x: hidden;
      }
      #theme-toggle {
        position: absolute;
        top: 10px;
        right: 10px;
        padding: 8px;
        background: #fff;
        border-radius: 5px;
        cursor: pointer;
      }
      .dark-mode #theme-toggle {
        background: #444;
        color: white;
      }
    </style>
    
    <script src="https://unpkg.com/@google/model-viewer/dist/model-viewer.min.js"></script>
  </body>
</html>





